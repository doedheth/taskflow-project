# Data Models - TaskFlow Server

Ringkasan skema data dan model yang ditemukan dalam `task-manager-server`.

## Database Engine: SQLite (sql.js)

## Core Entities

### 1. Tickets
Tabel utama untuk pelacakan tugas dan masalah.
- **Fields:** `id`, `ticket_key`, `title`, `description`, `type`, `status`, `priority`, `story_points`, `reporter_id`, `department_id`, `epic_id`, `sprint_id`, `asset_id`, `created_at`, `updated_at`.
- **Types:** `bug`, `task`, `story`, `epic`.
- **Status:** `todo`, `in_progress`, `review`, `done`.

### 2. Users
Manajemen identitas dan peran.
- **Fields:** `id`, `name`, `email`, `password_hash`, `role`, `department_id`, `avatar`.
- **Roles:** `admin`, `manager`, `supervisor`, `member`.

### 3. Work Orders
Entitas untuk instruksi kerja pemeliharaan.
- **Fields:** `id`, `wo_number`, `title`, `description`, `status`, `priority`, `asset_id`, `ticket_id`, `created_at`.
- **Relationships:** Terhubung ke `Tickets` (1:1) dan `Assets` (N:1).

### 4. Assets
Registri peralatan dan mesin.
- **Fields:** `id`, `asset_code`, `name`, `category`, `location`, `status`.

### 5. AI Predictions
Penyimpanan hasil analisis prediktif AI.
- **Fields:** `id`, `asset_id`, `risk_score`, `prediction_text`, `logic_reasoning`, `status`, `created_at`.

### 6. PLN Metrics
Data konsumsi energi frekuensi tinggi dari PLN Induk.
- **Fields:** `id`, `bp` (Beban Puncak), `lbp` (Luar Waktu Beban Puncak), `total`, `varh`, `power_factor`, `recorded_at`.

### 7. Solar Energy Data
Data produksi energi harian (Huawei vs Input Manual).
- **Fields:** `id`, `date`, `product_power` (Huawei), `manual_kwh` (Manual Input).

### 8. Solar Config
Konfigurasi kredensial Huawei FusionSolar.
- **Fields:** `id`, `username`, `password`, `station_dn`, `session_cookies`, `last_login`.

### 9. Slideshow Config
Pengaturan urutan dan durasi slide untuk tampilan publik.
- **Fields:** `id`, `slide_type`, `duration_seconds`, `slide_order`, `enabled`.

## Repositories (Data Access Layer)
Proyek menggunakan Repository Pattern untuk memisahkan logika kueri SQL:
- `TicketRepository.ts`: CRUD tiket, manajemen assignee, komentar.
- `UserRepository.ts`: Otentikasi dan manajemen pengguna.
- `AssetRepository.ts`: Manajemen aset dan status mesin.
- `WorkOrderRepository.ts`: Pengelolaan siklus hidup instruksi kerja.

---
*Generated by BMad Master - 2026-02-05*
